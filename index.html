<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>E‑commerce Admin Dashboard — Single File</title>
  <meta name="description" content="Single-file responsive e-commerce dashboard with HTML, CSS and JS integrated." />

  <!-- Google Font (optional) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0f1724; --card: #0b1220; --muted: #94a3b8; --accent: #06b6d4; --accent-2: #7c3aed;
      --glass: rgba(255,255,255,0.03);
      --success: #10b981; --danger:#ef4444; --surface:#0b1220;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; background: linear-gradient(180deg,#071024 0%, #071824 100%); color:#e6eef8}

    /* Layout */
    .app{display:grid;grid-template-columns:260px 1fr;gap:20px;min-height:100vh;padding:20px}
    .sidebar{background:linear-gradient(180deg,var(--card),#071026);border-radius:14px;padding:18px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}
    .main{padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;box-shadow:0 6px 20px rgba(2,6,23,0.5)}

    /* Sidebar content */
    .brand{display:flex;gap:12px;align-items:center;margin-bottom:18px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800}
    .brand h1{font-size:14px;margin:0}
    nav ul{list-style:none;padding:0;margin:10px 0}
    nav li{padding:10px;border-radius:8px;color:var(--muted);cursor:pointer}
    nav li.active, nav li:hover{background:var(--glass);color:#fff}

    .user{display:flex;gap:10px;align-items:center;padding-top:12px;border-top:1px dashed rgba(255,255,255,0.03);margin-top:12px}
    .avatar{width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,#123751,#0f3b56);display:flex;align-items:center;justify-content:center}

    /* Main header */
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .search{display:flex;gap:10px;align-items:center;background:var(--glass);padding:8px 12px;border-radius:12px}
    .search input{background:transparent;border:0;outline:0;color:inherit}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));padding:8px 12px;border-radius:10px;border:0;color:#001;cursor:pointer;font-weight:600}

    /* dashboard grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}
    .card h3{margin:0;font-size:13px;color:var(--muted)}
    .stat{font-size:20px;font-weight:700;margin-top:8px}
    .mini{display:flex;justify-content:space-between;align-items:center;margin-top:12px}

    /* sales area */
    .big{grid-column:span 2}
    .table-wrap{overflow:auto;margin-top:12px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03);font-size:13px}
    th{color:var(--muted);font-weight:600}

    /* responsive */
    @media (max-width:980px){.app{grid-template-columns:1fr}.grid{grid-template-columns:repeat(1,1fr)}.big{grid-column:auto}}

    /* tiny helpers */
    .muted{color:var(--muted)}
    .pill{background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:999px;font-size:12px}
    .trend-up{color:var(--success)} .trend-down{color:var(--danger)}

    /* footer */
    .footer{padding-top:12px;color:var(--muted);font-size:13px}

    /* small animation */
    .sparkle{display:inline-block;transform:translateY(0);transition:transform .25s}
    .sparkle:hover{transform:translateY(-4px)}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar" aria-label="Sidebar">
      <div class="brand">
        <div class="logo">EC</div>
        <div>
          <h1>E‑Commerce</h1>
          <div class="muted" style="font-size:12px">Admin Dashboard</div>
        </div>
      </div>

      <nav>
        <ul>
          <li class="active">Overview</li>
          <li>Orders</li>
          <li>Products</li>
          <li>Customers</li>
          <li>Analytics</li>
          <li>Marketing</li>
          <li>Settings</li>
        </ul>
      </nav>

      <div class="user">
        <div class="avatar">SP</div>
        <div>
          <div style="font-weight:700">Satya Pavani</div>
          <div class="muted" style="font-size:12px">Manager</div>
        </div>
      </div>

      <div class="footer" style="margin-top:16px">Version 1.0 &middot; <span class="muted">Last sync: <span id="lastSync">—</span></span></div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div style="display:flex;gap:12px;align-items:center">
          <div class="search">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="7"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            <input id="search" placeholder="Search orders, products or customers" />
          </div>

          <div class="pill">Date range: <strong id="dateRange">Last 30 days</strong></div>
        </div>

        <div class="controls">
          <button class="btn" id="refreshBtn">Refresh</button>
          <div class="pill" id="themeToggle" style="cursor:pointer">Toggle Theme</div>
        </div>
      </div>

      <!-- quick stats -->
      <section class="grid">
        <div class="card">
          <h3>Total Revenue</h3>
          <div class="stat">₹<span id="revenue">0</span></div>
          <div class="mini"><div class="muted">vs last period</div><div class="trend-up">+12.4%</div></div>
        </div>

        <div class="card">
          <h3>Orders</h3>
          <div class="stat" id="orders">0</div>
          <div class="mini"><div class="muted">Pending</div><div class="pill">12</div></div>
        </div>

        <div class="card">
          <h3>New Customers</h3>
          <div class="stat" id="customers">0</div>
          <div class="mini"><div class="muted">Returning</div><div class="muted">34%</div></div>
        </div>

        <div class="card big">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3>Sales (last 30 days)</h3>
            <div class="muted">Monthly trend</div>
          </div>
          <canvas id="salesChart" height="140"></canvas>
          <div style="display:flex;gap:12px;margin-top:8px">
            <div class="pill">Conversion: <strong id="conv">0.0%</strong></div>
            <div class="pill">AOV: ₹<strong id="aov">0</strong></div>
            <div class="pill">Refunds: ₹<strong id="refunds">0</strong></div>
          </div>
        </div>

        <div class="card">
          <h3>Top Products</h3>
          <div class="table-wrap">
            <table id="productsTable">
              <thead><tr><th>Product</th><th>Units</th><th>Revenue</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <h3>Recent Orders</h3>
          <div class="table-wrap">
            <table id="ordersTable">
              <thead><tr><th>Order</th><th>Customer</th><th>Total</th><th>Status</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

      </section>

      <!-- bottom: quick analytics -->
      <section style="margin-top:14px;display:grid;grid-template-columns:2fr 1fr;gap:14px">
        <div class="card">
          <h3>Traffic Sources</h3>
          <canvas id="trafficChart" height="120"></canvas>
        </div>

        <div class="card">
          <h3>Quick Actions</h3>
          <div style="display:flex;flex-direction:column;gap:8px;margin-top:10px">
            <button class="btn" id="exportCsv">Export Orders (CSV)</button>
            <button class="btn" id="fakeOrder">Generate Fake Order</button>
            <button class="btn" id="clearData">Clear Demo Data</button>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    // ---- Mock demo data generator ----
    const state = {
      orders: [], products: [], customers: [], lastSync: null
    };

    function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}

    function seedDemoData(){
      state.products = [
        {id:1,name:'Wireless Headphones'},
        {id:2,name:'Running Shoes'},
        {id:3,name:'Smart Watch'},
        {id:4,name:'Backpack'},
        {id:5,name:'Coffee Maker'}
      ];

      state.customers = Array.from({length:60}).map((_,i)=>({id:i+1,name:'Customer '+(i+1)}));

      state.orders = Array.from({length:120}).map((_,i)=>{
        const prod=state.products[rand(0,state.products.length-1)];
        const units=rand(1,4);
        const price=rand(1200,12000);
        const total=units*price;
        const daysAgo=rand(0,29);
        return {id:1000+i,product:prod.name,customer:state.customers[rand(0,state.customers.length-1)].name,total,units,status: ['Paid','Pending','Refunded'][rand(0,2)],date: daysAgo}
      });
      state.lastSync = new Date().toLocaleString();
      document.getElementById('lastSync').textContent = state.lastSync;
    }

    // ---- UI population ----
    function renderTopStats(){
      const revenue = state.orders.reduce((s,o)=>s+o.total,0);
      document.getElementById('revenue').textContent = revenue.toLocaleString();
      document.getElementById('orders').textContent = state.orders.length;
      document.getElementById('customers').textContent = new Set(state.orders.map(o=>o.customer)).size;
      document.getElementById('conv').textContent = (Math.random()*5+1).toFixed(2);
      document.getElementById('aov').textContent = Math.round(revenue/state.orders.length || 0);
      document.getElementById('refunds').textContent = Math.round(state.orders.filter(o=>o.status==='Refunded').reduce((s,o)=>s+o.total,0));
    }

    function populateTables(){
      const pt = document.querySelector('#productsTable tbody'); pt.innerHTML='';
      const prodSummary = {};
      state.orders.forEach(o=>{prodSummary[o.product]=(prodSummary[o.product]||0)+o.total});
      const prodRows = Object.entries(prodSummary).sort((a,b)=>b[1]-a[1]).slice(0,5);
      for (const [name,rev] of prodRows){
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${name}</td><td>${Math.round(rev/1000)}</td><td>₹${rev.toLocaleString()}</td>`;
        pt.appendChild(tr);
      }

      const ot = document.querySelector('#ordersTable tbody'); ot.innerHTML='';
      const latest = [...state.orders].sort((a,b)=>b.id-a.id).slice(0,8);
      for (const o of latest){
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>#${o.id}</td><td>${o.customer}</td><td>₹${o.total.toLocaleString()}</td><td>${o.status}</td>`;
        ot.appendChild(tr);
      }
    }

    // ---- Charts ----
    let salesChart, trafficChart;
    function initCharts(){
      const salesCtx = document.getElementById('salesChart').getContext('2d');
      const labels = Array.from({length:30}).map((_,i)=>`${30-i}d` ).reverse();
      const sales = Array.from({length:30}).map(()=>rand(10000,120000));
      salesChart = new Chart(salesCtx,{type:'line',data:{labels, datasets:[{label:'Revenue',data:sales,fill:true,tension:0.3,pointRadius:0}]},options:{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,ticks:{callback: v=> '₹'+(v/1000)+'k'}}}}});

      const trafficCtx = document.getElementById('trafficChart').getContext('2d');
      trafficChart = new Chart(trafficCtx,{type:'doughnut',data:{labels:['Organic','Paid','Referral','Social'],datasets:[{data:[rand(40,60),rand(5,25),rand(5,20),rand(5,15)],hoverOffset:6}]},options:{plugins:{legend:{position:'bottom'}}}});
    }

    // ---- Controls ----
    document.getElementById('refreshBtn').addEventListener('click',()=>{ seedDemoData(); renderAll(); flash('Refreshed'); });
    document.getElementById('fakeOrder').addEventListener('click',()=>{ const p = state.products[rand(0,state.products.length-1)]; state.orders.push({id:Date.now(),product:p.name,customer:'Guest '+rand(1,999),total:rand(900,25000),units:rand(1,3),status:'Paid',date:0}); renderAll(); flash('Fake order added'); });
    document.getElementById('clearData').addEventListener('click',()=>{ state.orders=[]; renderAll(); flash('Demo data cleared'); });

    document.getElementById('exportCsv').addEventListener('click',()=>{
      if(!state.orders.length){flash('No orders to export');return}
      const rows = [ ['Order ID','Product','Customer','Units','Total','Status'] ];
      state.orders.forEach(o=>rows.push([o.id,o.product,o.customer,o.units,o.total,o.status]));
      const csv = rows.map(r=>r.map(c=>`"${String(c).replace(/"/g,'""') }"`).join(',')).join('\n');
      const blob=new Blob([csv],{type:'text/csv'}); const url=URL.createObjectURL(blob);
      const a=document.createElement('a'); a.href=url; a.download='orders_export.csv'; a.click(); URL.revokeObjectURL(url);
      flash('CSV exported');
    });

    // search filter
    document.getElementById('search').addEventListener('input',(e)=>{
      const q=e.target.value.toLowerCase();
      const ot = document.querySelector('#ordersTable tbody'); ot.innerHTML='';
      const matches = state.orders.filter(o=> String(o.id).includes(q) || o.product.toLowerCase().includes(q) || o.customer.toLowerCase().includes(q)).slice(0,8);
      for (const o of matches){ const tr=document.createElement('tr'); tr.innerHTML=`<td>#${o.id}</td><td>${o.customer}</td><td>₹${o.total.toLocaleString()}</td><td>${o.status}</td>`; ot.appendChild(tr);}    
    });

    // tiny flash
    function flash(msg){
      const el=document.createElement('div'); el.textContent=msg; el.style.position='fixed'; el.style.right='18px'; el.style.bottom='18px'; el.style.padding='10px 14px'; el.style.background='linear-gradient(90deg,var(--accent),var(--accent-2))'; el.style.color='#001'; el.style.borderRadius='10px'; el.style.fontWeight=700; document.body.appendChild(el);
      setTimeout(()=>el.style.opacity='0',1200); setTimeout(()=>el.remove(),1600);
    }

    function renderAll(){ renderTopStats(); populateTables(); updateCharts(); document.getElementById('lastSync').textContent = state.lastSync || '—' }

    function updateCharts(){
      if(salesChart){
        const labels = salesChart.data.labels;
        salesChart.data.datasets[0].data = labels.map(()=>rand(8000,110000));
        salesChart.update();
      }
      if(trafficChart){ trafficChart.data.datasets[0].data = [rand(40,60),rand(5,25),rand(5,20),rand(5,15)]; trafficChart.update(); }
    }

    // theme toggle (very simple, dark/light)
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click',()=>{
      if(document.documentElement.style.getPropertyValue('--bg')===''){
        document.documentElement.style.setProperty('--bg','#fff');
        document.documentElement.style.setProperty('--card','#f7fafc');
        document.documentElement.style.setProperty('--muted','#475569');
        document.documentElement.style.setProperty('--accent','#06b6d4');
        document.documentElement.style.setProperty('--accent-2','#7c3aed');
        document.body.style.background='linear-gradient(180deg,#f8fafc,#eef2ff)';
        document.body.style.color='#022';
      } else {
        document.documentElement.style.removeProperty('--bg');
        document.documentElement.style.removeProperty('--card');
        document.documentElement.style.removeProperty('--muted');
        document.documentElement.style.removeProperty('--accent');
        document.documentElement.style.removeProperty('--accent-2');
        document.body.style.background='linear-gradient(180deg,#071024,#071824)';
        document.body.style.color='#e6eef8';
      }
    });

    // initialisation
    seedDemoData();
    initCharts();
    renderAll();

    // small autosave to localStorage so demo persists
    window.addEventListener('beforeunload',()=>{localStorage.setItem('demo_orders', JSON.stringify(state));});

  </script>
</body>
</html>
